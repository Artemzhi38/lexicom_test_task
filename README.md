# lexicom_test_task(Practice)

Веб-сервис адресной книги, реализованный на фреймворке Fast-api и использующий Redis в качестве хранилища данных.

Сервис позволяет просматривать, добавлять и изменять записи в хранилище, состоящие из пар "телефон - адрес". 
В проект добавлена валидация номера телефона(кастомная) а также валидация адреса с помощью API стороннего сервиса "Ahunter".
В хранилище может добавлена только запись с номером телефона проходящим по формату, и реально существующим адресом переданном в формате КЛАДР/ФИАС.
Для упрощения поиска адреса в необходимом формате в проект добавлен эндпоинт, выдающий возможные варианты правильно отформатированного адреса по введённой его части.
Рекомендуется предварительно проверять адрес с помощью этого эндпоинта перед созданием новой записи в хранилище.

## Запуск проекта 
Для корректной работы проекта необходимо интернет-соединение и доступ к сайту https://www.ahunter.ru/

Проект можно запустить в Docker с помощью команды:
```shell
docker-compose up -d --build    
```

Далее после билда образа и запуска заходим в Swagger по ссылке http://127.0.0.1:8000/docs и получаем возможность вручную протестировать работу эндпоинтов:


### Получение списка правильно отформатированных вариантов адреса
GET http://127.0.0.1:8000/get_suggestions/{address}


### Получение адреса по номеру телефона
GET http://127.0.0.1:8000/check_data/{phone}


### Добавление в хранилище пары "телефон-адрес"
POST http://127.0.0.1:8000/write_data

Тело запроса: {"phone": "89991112233", "address": "valid address"}


### Изменение адреса в хранилище
PATCH http://127.0.0.1:8000/write_data

Тело запроса: {"phone": "89991112233", "address": "new valid address"}


## Тестирование проекта
Тестирование в проекте организовано с помощью библиотеки pytest. Юнит-тесты находятся в файле 'app_tests.py'.

Для их запуска из корневой директории проекта следует воспользоваться командой:
```shell
pytest app_tests.py   
```


## Дополнительно

Код проекта был проверен линтерами black и isort
Зависимости указаны в файле requirements.txt


# lexicom_test_task(SQL theory)

## Описание задачи
Дано две таблицы в СУБД Postgres.(700.000 и 500.000 записей)
В одной таблице хранятся имена файлов без расширения. В другой хранятся имена файлов с
расширением. Одинаковых названий с разными расширениями быть не может, количество
расширений не определено, помимо wav и mp3 может встретиться что угодно.
Нам необходимо минимальным количеством запросов к СУБД перенести данные о статусе из
таблицы short_names в таблицу full_names.
Необходимо понимать, что на выполнение запросов / время работы скрипта нельзя тратить
больше 10 минут. Лучшее время выполнения этого тестового задания в 2022 году - 45 секунд на
SQL запросе.
Необходимо предоставить два и более варианта решения этой задачи.

## Решение задачи
